<!DOCTYPE html><html><head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>HAR Visualization Tool</title>
	<script id="armInlineWorker" type="javascript/worker">
		onmessage = (messageEvent) => console.log("@blob busWorker messageEvent", messageEvent);
	</script>
	<script type="module">
		const blob = new Blob([document.getElementById("armInlineWorker").textContent]);
		const worker = new Worker(window.URL.createObjectURL(blob));
		worker.postMessage("init");
		window.onmessage = (msg) => console.log("hey a msg: ", msg);
		worker.addEventListener("message", (msgEvent) => console.log("window handling worker msg event", msgEvent), false);

		Object.defineProperty(window, "busWorker", {
			configurable: false,
			writable: false,
			enumerable: true,
			value: worker
		});
	</script>
	<script src="./node_modules/chart.js/dist/Chart.min.js"></script>
	<script>
		(() => {
			// Disable automatic style injection
			window.Chart.platform.disableCSSInjection = true;
		})();
	</script>
	<style type="text/css">
		body {
			padding: 0;
			margin: 0;
			display: flex;
			float: none;
			clear: both;
			flex-direction: column;
			box-sizing: border-box;
		}
		header,
		footer {
			position: relative;
			flex: 1 0 100%;
		}
		section {
			position: relative;
		}
		arm-har-viz {
			display: inline-flex;
			max-height: 400px;
			width: 33vw;
		}
		arm-dropzone {
			width: calc(50% - 10px);
			height: calc(50% - 10px);
			display: block;
			position: fixed;
			right: 0;
			/*pointer-events: none;*/
		}

		@media only screen and (max-width: 600px) {
			section {
				flex-direction: row;
			}

			arm-har-viz {
				display: inline-flex;
				width: 100%;
				max-height: none;
			}
		}
	</style>
</head><body>
	<header class="template--section section--header">
		<nav>Header nav</nav>
		<a href="https://github.com/or9/har-compare-viz">Source Code</a>
	</header>
	<h1>HAR Visualization Tool</h1>

	<!-- compare side-by-side, or same chart, multiple data? -->
	<!-- same chart seems better; display filters which allow hiding comparison datasets -->
	<section class="template--section section--body">
		<!-- meta section -->
		<arm-har-viz></arm-har-viz>
		<arm-har-viz></arm-har-viz>
		<arm-har-viz></arm-har-viz>
	</section>

	<section class="template--section section--body">
		<!-- pages section -->
		<arm-har-viz></arm-har-viz>
	</section>

	<section class="template--section section--body">
		<!-- entries section -->
		<arm-har-viz></arm-har-viz>
	</section>

	<!--
		schema {
			'$schema': 'http://json-schema.org/draft-04/schema#',
			description: '',
			type: 'object',
			properties: {
				version: {
					type: 'string',
					minLength: 1
				},
				creator: {
					type: 'object',
					properties: {
						name: { type: 'string', minLength: 1 },
						version: { type: 'string', minLength: 1 }
					},
					required: [ 'name', 'version' ]
				},
				pages: { type: 'array', uniqueItems: true, minItems: 1, items: [Object] },
				entries: { type: 'array', uniqueItems: true, minItems: 1, items: [Object] }
			},
			required: [ 'version', 'creator', ... ]
		}
		-->
		<!-- <p class="template--section section--meta">
			<span class="version"><code>{{ version }}</code></span>
			<span class="creator">{{ creator.name }} <code>{{ creator.version }}</code></span>
		</p> -->

		<!--
		schema {
			type: 'array',
			'$schema': 'http://json-schema.org/draft-04/schema#',
			description: '',
			minItems: 1,
			uniqueItems: true,
			items: {
				type: 'object',
				properties: {
					startedDateTime: [Object],
					time: [Object],
					request: [Object],
					response: [Object],
					cache: [Object],
					timings: [Object],
					serverIPAddress: [Object],
					_initiator: [Object],
					_priority: [Object],
					_resourceType: [Object],
					connection: [Object],
					pageref: [Object]
				}
			}
		}
		-->
		<!-- <section class="template--section section--pages">
			<ul>
			{{#each pages}}
				<li>
					<ul>
						<li><label>startedDateTime: </label><code>{{ this.startedDateTime }}</code></li>
						<li><label>time: </label><code>{{ this.time }}</code></li>
						<li><label>request: </label><code>{{ this.request }}</code></li>
						<li><label>response: </label><code>{{ this.response }}</code></li>
						<li><label>cache: </label><code>{{ this.cache }}</code></li>
						<li><label>timings: </label><code>{{ this.timings }}</code></li>
						<li><label>serverIPAddress: </label><code>{{ this.serverIPAddress }}</code></li>
						<li><label>_initiator: </label><code>{{ this._initiator }}</code></li>
						<li><label>_priority: </label><code>{{ this._priority }}</code></li>
						<li><label>_resourceType: </label><code>{{ this._resourceType }}</code></li>
						<li><label>connection: </label><code>{{ this.connection }}</code></li>
						<li><label>pageref: </label><code>{{ this.pageref }}</code></li>
					</ul>
				</li>
			{{/each}}
			</ul>
		</section> -->

		<!--
		schema {
			type: 'array',
			'$schema': 'http://json-schema.org/draft-04/schema#',
			description: '',
			minItems: 1,
			uniqueItems: true,
			items: {
				type: 'object',
				properties: {
					startedDateTime: '2020-05-21T17:59:40.350Z',
					time: 60.9669999998156,
					request: {
						method: [String],
						url: 'http://localhost:3011/page/amt',
						httpVersion: 'HTTP/1.1',
						headers: [
							[Object], [Object], [Object], ...
						],
						queryString: [],
						cookies: [ [Object], [Object], [Object] ],
						headersSize: [Integer],
						bodySize: 0
					},
					response: {
						status: 200,
						statusText: 'OK',
						httpVersion: 'HTTP/1.1',
						headers: [
							[Object], [Object], [Object], ...
						],
						cookies: [],
						content: {
						size: 1328029,
						mimeType: 'text/html',
						compression: 0,
						content: {
							size: 1328029,
							mimeType: 'text/html',
							compression: 0,
							text: '<!DOCTYPE html>\n...',
							redirectURL: '',
							headersSize: 1203,
							bodySize: 1328029,
							_transferSize: 1329232,
						}
					cache: {},
					timings: {
						blocked: 3.3589999889228492,
						dns: 0.015000000000000124,
						ssl: -1,
						connect: 0.19900000000000007,
						send: 0.20500000000000007,
						wait: 3.3169999922923745,
						receive: 53.872000018600374,
						_blocked_queueing: 2.1809999889228493,
						_blocked_proxy: 0.0020000000000000018
					},
					serverIPAddress: '[::1]',
					_initiator: { type: 'other' },
					_priority: 'VeryHigh',
					_resourceType: 'document',
					connection: '492202',
					pageref: 'page_78'
				}
			}
		}
		-->
		<!-- <section class="template--section section--entries">
		{{#each entries}}
			<label>startedDateTime: </label><code>{{ this.startedDateTime }}</code><br />
			<label>time: </label><code>{{ this.time }}</code><br />
			<label>request: </label><code>{{ this.request }}</code><br />
			<label>response: </label><code>{{ this.response }}</code><br />
			<label>cache</label><code>{{ this.cache }}</code><br />
			<label>timings</label><code>{{ this.timings }}</code><br />
			<label>serverIPAddress</label><code>{{ this.serverIPAddress }}</code><br />
			<label>_initiator</label><code>{{ this._initiator }}</code><br />
			<label>_priority</label><code>{{ this._priority }}</code><br />
			<label>_resourceType</label><code>{{ this._resourceType }}</code><br />
			<label>connection</label><code>{{ this.connection }}</code><br />
			<label>pageref</label><code>{{ this.pageref }}</code><br />
		{{/each}}
		</section> -->

	<footer class="template--section section--footer">
		<span id="footerCopyright"></span>
	</footer>

	<arm-dropzone bus-worker="busWorker" onmessage="(message) => console.log('oh hey a msg', message)"></arm-dropzone>

	<script type="module" src="./arm108-har-viz.element.mjs"></script>
	<script type="module" src="./arm108-dropzone.element.mjs"></script>
	<script type="module">
		document.getElementById("footerCopyright").innerHTML = `Â©${new Date().getFullYear()} by Rahman Malik`;
	</script>
</body></html>
